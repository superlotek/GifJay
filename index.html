<!doctype html>
<html class="no-js" lang="">
  <head>
    <title>GifJay</title>

    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/png" sizes="32x32" href="guts/img/favicon-32x32.png">

    <link href="guts/css/styles.css" media="all" rel="stylesheet" />

    <script src="guts/js/jquery-2.1.4.min.js"></script>
    <script src="guts/js/mousetrap.min.js"></script>
    <script src="guts/js/keydrown.js"></script>
    <script src="settings.js"></script>
    <script src="guts/js/Inits.js"></script>

     <script src="guts/js/Scene.js"></script>
    <script src="guts/js/Play.js"></script>
    <script src="guts/js/Overlays.js"></script>
    <script src="guts/js/Filter.js"></script>
    <script src="guts/js/Effects.js"></script>
    <script src="guts/js/Text.js"></script>
    <script src="guts/js/Keyboard.js"></script>
    <script src="guts/js/Hud.js"></script>

    <script src="playlist.js"></script>
  </head>

  <style>
    body { background: #333; position: relative; background: #333 !important; }
    a { color: #fff; }
    table { width: 100%; margin: 0 auto; }
    tr { display: flex; justify-content: center; margin: 10px 0; }

    header { background: #000; width: 100%; display: grid; grid-template-columns: 150px 100px 100px auto 100px; }
    .logo-home { padding: 20px; text-align: left; display: inline; }
    .logo-home img { height: 40px; }
    #hud-settings { padding: 20px; text-align: right; }



    td {  }
    button { font-size: 14px; width: 100%; border: 1px solid #fff; background: none; padding: 10px; text-transform: uppercase; color: #ffffff; cursor: pointer; }
    button:focus { outline: none; }
    button:disabled { opacity: .5; }

    .stage-one.mini, .stage-two.mini {
        display: block;
        position: static;
        border: 1px solid white;
        width: 200px;
        height: 150px;
        background-size: cover;
    }
    .scene { border: 5px solid white; }
    .scene.mini, #overlays-mini { /*width: 400px; height: 300px; */position: relative; }
    .scene-container { display: none; }
    .stage-one-mini, .stage-two-mini, #branding-mini {
        display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover;
    }
    .stage-two-mini { mix-blend-mode: screen; }
    #branding-mini { background: yellow; }
    .robomode-container { background: #444; margin: 20px; width: 600px; margin: 20px auto 0 auto; }
    .effects-container { background: #666; margin: 20px; }
    button.active { border: 2px solid #000; background: #ffffff; color: #000000; }

    .gps-data { color: #000; width: 100%; }
    .gps-wrapper { background: #fff; border: 1px solid green; min-width: 280px; text-align: center; padding: 5px; }
    .gps-meter-container {
        width: 200px;
        height: 10px;
        background: #fff;
        position: relative;
        border: 1px solid black;
    }
    .gps-meter {
        background: green;
        width: 0;
        height: 10px;
        position: absolute:
        top: 0;
        left: 0;
    }
    #hud-open { width: 70px; border: 0; }
    #hud-open.active { width: 70px; border: 0; background: initial; }
    #hud-start { width: 70px; border: 0; }
    #hud-start.active { width: 70px; border: 0; background: initial; }
    #hud-settings img { width: 40px; border: 0; background: initial; }
    #hud-start img { width: 40px; border: 0; background: initial; }

    #hud-settings.active { width: 70px; }

        .bank-slider { position: fixed; width: 100%; bottom: -640px; left: 0; }
        .bank-slider-container { background: rgba(0,0,0,.8); border: 1px solid black; padding: 20px; height: 600px; }
        .bank-slider ul { display: flex; list-style-type: none; margin: 20px 0; flex-wrap: wrap; }
        .bank-slider li { margin: 0 10px 5px 10px; position: relative; }
        .bank-slider li img { width: 200px; max-height: 100px; border: 1px solid #eee; }
        .bank-slider li span { position: absolute; top: 1px; left: 1px; background: black; padding: 5px; text-transform: uppercase; font-weight: bold; color: orange; }

        #btn-bankSlider { background: #fff; color: #000; font-weight: bold; width: 300px; margin: 0 auto; display: block; }
        .bank-slider-container p { text-align: center; margin-top: 5px; color: #fff; font-size: 12px; font-weight: bold; text-transform: uppercase; }
        .banker-buttons { display: flex;}

  </style>

  <body>
    

    <header>
        <div class="logo-home"><img src="guts/img/gifjay_logo_white_small.png"></div>
        <button id="hud-open"><img width="50" src="guts/img/projector_white.png"></button>
        <button id="hud-start" disabled><img width="50" src="guts/img/power_white.png"></button>
        <div></div>
        <a id="hud-settings" href="settings.html"><img width="50" src="guts/img/settings_white.png"></button></a>
    </header>

    <div class="scene-container">
        <table>
            <tr>
                <td>
                    <table>
                        <tr>
                            <td>
                                <div class="stage-one mini"></div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <button id="hud-stageOneSelect">STG 1 Select</button>
                            </td>
                            <td>
                                <button id="hud-stageOneToggle">STG 1 Toggle</button>
                            </td>                        </tr>
                    </table>
                </td>

                <td>
                    <div id="scene" class="scene mini">
                        <div class="stage-one-mini"></div>
                        <div class="stage-two-mini"></div>
                    </div>
                    <div id="overlays-mini">
                        <div id="branding-mini"></div>
                    </div>

                </td>
                <td>
                    <table>
                        <tr>
                            <td>
                                <div class="stage-two mini"></div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <button id="hud-stageTwoSelect">STG 2 Select</button>
                            </td>
                            <td>
                                <button id="hud-stageTwoToggle">STG 2 Toggle</button>
                            </td>                        
                        </tr>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </div>  

    <div class="">
        <table class="robomode-container">
                <tr>
                    <td><p class="gps-wrapper">GPS: <span class="gps-data"></span></p></td>
                </tr>
                <tr>
                    <td><button id="hud-setGPS">Set GPS</button></td>
                    <td><button id="hud-robomode">RoboMode</button></td>
                </tr>
                <tr>
                    <td> <button id="hud-GPSFast">GPS Fast</button></td>
                    <td><button id="hud-GPSBurst">GPS Burst</button></td>
                    <td><button id="hud-GPSSlow">GPS Slow</button></td>
                </tr>
            <tr>
        </table>
    </div>

    <button id="glar">gleeeeeep</button>


    <div class="bank-slider">
        <button id="btn-bankSlider">BANKS</button>
        <div class="bank-slider-container">
            <div class="banker-buttons">
                <button id="hud-banker">Banker Select</button>
                <button id="hud-banker">Banker Stage Select</button>
                <button id="hud-banker">Stage 1</button>
                <button id="hud-banker">Stage 2</button>
                <button id="hud-bankerPlayAll">Banker Play All</button>
                <button id="hud-bankerClear">Clear</button>
            </div>
            <ul id="banks-container"></ul>
        </div>
    </div>




    <script>

        function stageUpdate() {
            $('.stage-one').css('backgroundImage', myWindow.$('.stage-one').css('backgroundImage') );
            $('.stage-two').css('backgroundImage', myWindow.$('.stage-two').css('backgroundImage') );
            $('.scene.mini').css('background', myWindow.$('body').css('backgroundColor'));
            $('.scene.mini .stage-one-mini').css('backgroundImage', myWindow.$('.stage-one').css('backgroundImage') );
            $('.scene.mini .stage-two-mini').css('backgroundImage', myWindow.$('.stage-two').css('backgroundImage') );
            $('.scene.mini .stage-one-mini').css('background-repeat', myWindow.$('.stage-one').css('backgroundRepeat') );
            $('.scene.mini .stage-two-mini').css('background-repeat', myWindow.$('.stage-two').css('backgroundRepeat') );
            $('#overlays-mini #branding-mini').css('backgroundImage', myWindow.$('.branding.on').css('backgroundImage') );
        }

        function updateSceneSize() {
            $('.scene.mini').css({width: myWindow.innerWidth/2 + 'px', height: myWindow.innerHeight/2 + 'px'});
            $('.stage-one').css({width: myWindow.innerWidth/3 + 'px', height: myWindow.innerHeight/3 + 'px'});
            $('.stage-two').css({width: myWindow.innerWidth/3 + 'px', height: myWindow.innerHeight/3 + 'px'});
        }

        function convertBeatTime(beatTime) {
          var converto = beatTime / 1000;
          return Math.round(converto * 100) / 100 + 's';
        }


    $(document).ready(function() {

        var binLocation = "Bins/";

        $('#hud-start').click(function() { myWindow.Mousetrap.trigger('alt+backspace'); $('button').attr('disabled', false);
                // $('.stage-one').css('backgroundImage', myWindow.$('.stage-one').css('backgroundImage') );
                // $('.stage-two').css('backgroundImage', myWindow.$('.stage-two').css('backgroundImage') );
                stageUpdate(); updateSceneSize(); $('.scene-container').fadeIn(); doStuff();
          });

        $('#hud-stageFlip').click(function() { myWindow.Mousetrap.trigger('space'); stageUpdate(); });
        $('#scene').click(function() { myWindow.Mousetrap.trigger('space'); stageUpdate(); });


        var bankSliderUp = false;
        $('#btn-bankSlider, #hud-banker').on('click', function() {
            if (!bankSliderUp) {
                $('.bank-slider').animate({bottom: "0", display: 'block'}, 500, function() {
                });
                bankSliderUp = true;
            } else {
                $('.bank-slider').animate({bottom: "-640px", display: 'block'}, 500, function() {
                });
                bankSliderUp = false;
            }
        });

        $('#hud-open').click(function() { myWindow = window.open("gifjay.html","hudder","width=600,height=600"); $('#hud-close, #hud-start').attr('disabled', false); $('#hud-start').attr('disabled', false) });
        $('#hud-close').click(function() { myWindow.close(); });

        for ( let i = 0; i < enabledBanksArray.length; i++) {
             $('#banks-container').append('<li><a href><img src="' + binLocation + '/' + enabledBanksArray[i].thumbnail + '.gif' + '"/><span>' + enabledBanksArray[i].trigger + '</span></a><p>' + enabledBanksArray[i].name +'</p></li>');
        }

         $('#banks-container li').on('click', function(e) {
            e.preventDefault();
              var index = $( "#banks-container li" ).index( this );
              console.log("Bank Trigger: ", enabledBanksArray[index].trigger);
              myWindow.Mousetrap.trigger(enabledBanksArray[index].trigger.toUpperCase());

         });


        $('#hud-setGPS').click(function() { myWindow.Mousetrap.trigger('return'); });
        $('#hud-robomode').click(function() { myWindow.Mousetrap.trigger('\''); });
        $('#hud-GPSFast').click(function() { myWindow.Mousetrap.trigger(','); });
        $('#hud-GPSSlow').click(function() { myWindow.Mousetrap.trigger('/'); });
        $('#hud-GPSBurst').click(function() { myWindow.Mousetrap.trigger('.'); });

        function doStuff() {
                    myWindow.Mousetrap.bind("k", function() {
            alert('yay worky');
        })

        }



        $('#glar').on('click', function() {
            myWindow.Mousetrap.trigger("k");
        });

    });



    </script>

  </body>
</html>
